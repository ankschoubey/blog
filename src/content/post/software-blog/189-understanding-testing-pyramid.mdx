---
title: "Mastering the Testing Pyramid: A Comprehensive Guide for Developers"
excerpt: Delve into the layers of the Testing Pyramid and discover how to implement a balanced testing strategy that enhances software quality and accelerates development cycles.
slug: /software-blog/understanding-testing-pyramid
image: /images/software-blog/189-understanding-testing-pyramid/software-testing-pyramid.png
tags:
    - technical
publishDate: 2025-03-05T13:04:14.028769
gpt: chatgpt url
---

## What is a Test Pyramid and Why is it important?

A good test pyramid ensures that our tests are fast.

Typically, we have 3 main types of tests

1. Unit
2. Integration
3. E2E

There are some hybrids called slice testing in the middle.

Our aim should be to that the

- Number of Unit Test is more than Number of Integration Test which should be more than Number of E2E.

This is because Unit Tests are the fastest. Integration Tests are a slower and E2E are the slowest.

I believe that tests on a codebase should not take more than 3-5 minutes. Because going beyond it, we lose our attention span and things pile up.

Below, I describe some ways with which I have been ensuring a good test pyramid.

## How I ensure a good test pyramid?

1. Entities -> Unit test of Entity and all its behaviors.
   1. No Integration Test Required Here
   2. This is a good spot to create a Test\{Entity}Builder for future tests.
   3. Covers about 50% of tests
2. Service/Handlers
   1. If Repository methods and API Clients are simple (Next 30-40% tests)
      1. Unit Test: Hashmap-based InMemoryRepositories
         1. Reduces mock usage. Makes writing tests simpler
      2. Mocked API Clients
   2. If Repository methods are complex (customQuery/criteria Api)
3. Integration Test with DB and actual API call. (5-10% of all tests)
   1. API client from another microservice is integration tested.
4. Anything architectural is also tested.
5. Any failures on Play / Prod will have a new test written.
6. Any code review point that is syntactical goes to below KB for future automation

## Resources

- [TDD Series](/tdd)
- [Create In-Memory Repository based on HashMap for Unit Tests Using Generative AI Instead of Mocking](/software-blog/in-memory-repositories-unit-test/#google_vignette)
- [The Practical Test Pyramid](https://martinfowler.com/articles/practical-test-pyramid.html)
